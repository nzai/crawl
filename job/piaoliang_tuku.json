[{
    "type":"get",
    "parameters": {
        "url": {
            "type": "static",
            "value": "http://tuku.piaoliang.com/mm/"
        },
        "key": "frontPage",
        "debug": false
    },
    "actions":[{
        "type": "match",
        "parameters": {
            "key": "frontPage",
            "pattern": "<strong>(\\d+)<\/strong>页",
            "keys": ["frontPages"]
        },
        "actions":[{
            "type": "range",
            "parameters": {
                "start": {
                    "type": "static",
                    "value": 1
                },
                "end": {
                    "type": "context",
                    "key": "frontPages"
                },
                "format": "%d",
                "key": "frontPageIndex",
                "parallel": 4,
                "debug": false
            },
            "actions":[{
                "type":"get",
                "parameters": {
                    "url": {
                        "type": "format",
                        "pattern": "http://tuku.piaoliang.com/mm/list_1_%s.html",
                        "keys": ["frontPageIndex"]
                    },
                    "key": "frontPageIndex"
                },
                "actions":[{
                    "type": "match",
                    "parameters": {
                        "key": "frontPageIndex",
                        "pattern": "class=\"pics\" href=\"(http:\/\/tuku.piaoliang.com\/mm\/(\\d+)\/)\"[\\S\\s]*?class=\"pics_tit\">([^<]*?)<",
                        "keys": ["sectionPageUrl", "sectionNo", "sectionTitle"],
                        "debug": false
                    },
                    "actions":[{
                        "type":"get",
                        "parameters": {
                            "url": {
                                "type": "format",
                                "pattern": "%s",
                                "keys": ["sectionPageUrl"]
                            },
                            "key": "sectionPageHtml"
                        },
                        "actions":[{
                            "type": "match",
                            "parameters": {
                                "key": "sectionPageHtml",
                                "pattern": "<\/a>\\(\\d+\/(\\d+)\\)<\/div>[\\S\\s]*?日期：(\\d+)年[\\S\\s]*?relative\"><img alt=\"\" src=\"(\\S*\/(\\S*?))\"",
                                "keys": ["sectionPages", "sectionYear", "sectionPictureUrl", "sectionPictureFileName"],
                                "debug": false
                            },
                            "actions":[{
                                "type":"download",
                                "parameters": {
                                    "url": {
                                        "type": "format",
                                        "pattern": "http://tuku.piaoliang.com%s",
                                        "keys": ["sectionPictureUrl"]
                                    },
                                    "path": {
                                        "type": "format",
                                        "pattern": "/home/nzai/data/pic/piaoliang/%s/%s %s/%s",
                                        "keys": ["sectionYear", "sectionNo", "sectionTitle", "sectionPictureFileName"]
                                    },
                                    "debug": false
                                }
                            },{
                                "type": "range",
                                "parameters": {
                                    "start": {
                                        "type": "static",
                                        "value": 2
                                    },
                                    "end": {
                                        "type": "context",
                                        "key": "sectionPages"
                                    },
                                    "format": "%d",
                                    "key": "sectionPageIndex",
                                    "parallel": 4,
                                    "debug": false
                                },
                                "actions":[{
                                    "type":"get",
                                    "parameters": {
                                        "url": {
                                            "type": "format",
                                            "pattern": "http://tuku.piaoliang.com/mm/%s/index_%s.html",
                                            "keys": ["sectionNo", "sectionPageIndex"]
                                        },
                                        "key": "sectionIndexHtml"
                                    },
                                    "actions":[{
                                        "type": "match",
                                        "parameters": {
                                            "key": "sectionIndexHtml",
                                            "pattern": "relative\">[\\S\\s]*?<img alt=\"\" src=\"(\\S*\/(\\S*?))\"",
                                            "keys": ["pictureUrl", "pictureFileName"],
                                            "debug": false
                                        },
                                        "actions":[{
                                            "type":"download",
                                            "parameters": {
                                                "url": {
                                                    "type": "format",
                                                    "pattern": "http://tuku.piaoliang.com%s",
                                                    "keys": ["pictureUrl"]
                                                },
                                                "path": {
                                                    "type": "format",
                                                    "pattern": "/home/nzai/data/pic/piaoliang/%s/%s %s/%s",
                                                    "keys": ["sectionYear", "sectionNo", "sectionTitle", "pictureFileName"]
                                                },
                                                "debug": false
                                            }
                                        }]
                                    }]
                                }]
                            }]
                        }]
                    }]
                }]
            }]
        }]
    }]
}]
