[{
    "type":"get",
    "parameters": {
        "url": {
            "type": "static",
            "value": "http://www.beautylegmm.com/"            
        },
        "key": "frontpage"
    },
    "actions": [{
        "type": "match",
        "parameters": {
            "key": "frontpage",
            "pattern": ">(\\d+)</a></li><li class=\"next\">",
            "keys": ["totalPages"]
        },
        "actions": [{
            "type": "range",
            "parameter": {
                "start": {
                    "type": "static",
                    "value": 1
                },
                "end": {
                    "type": "context",
                    "value": "totalPages"
                },
                "format": "%d",
                "key": "currentPage",
                "parallel": 16
            },
            "actions": [{
                "type": "get",
                "parameters": {
                    "url": {
                        "type": "format",
                        "pattern": "http://www.beautylegmm.com/index-%s.html",
                        "keys": ["currentPage"]
                    },
                    "key": "page"
                },
                "actions": [{
                    "type": "match",
                    "parameters": {
                        "key": "page",
                        "pattern": "<div align=\"center\" class=\"post_weidaopic_title\"><a href=\"([^\"]*?)\" target=\"_blank\">(.*?No.(\\d+) (\\w+) (\\d{4}).\\d{2}.\\d{2} \\[(\\d+)P\\])</a></div>",
                        "keys": ["url", "no", "title", "year", "pictures"]
                    },
                    "actions":[{
                        "type": "range",
                        "parameters": {
                            "start": {
                                "type": "static",
                                "value": 0
                            },
                            "end": {
                                "type": "context",
                                "value": "totalPages",
                                "offset": -1
                            },
                            "format": "%.4d",
                            "key": "pictureIndex",
                            "parallel": 16
                        },
                        "actions": [{
                            "type": "download",
                            "parameters": {
                                "url": {
                                    "type": "format",
                                    "pattern": "http://www.beautylegmm.com/photo/beautyleg/%s/%s/beautyleg-%s-%s.jpg",
                                    "keys": ["title", "pictureIndex", "year", "no"]
                                },
                                "path": {
                                    "type": "format",
                                    "pattern": "c:\\data\\bmm\\%s\\%s %s\\%s.jpg",
                                    "keys": ["year", "no", "title", "no"]
                                }
                            }
                        }]
                    }]
                }]                
            }]
        }]
    }]    
}]